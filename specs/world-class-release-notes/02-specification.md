---
slug: world-class-release-notes
number: 44
created: 2026-02-18
status: specified
---

# World-Class Release Notes & Blog Infrastructure

**Status:** Specified
**Authors:** Claude Code, 2026-02-18
**Related:** Spec #33 (Versioning, Release & Update System), Spec #37 (World-Class Documentation)

---

## Overview

Add a blog to the DorkOS marketing site, fix content drift between the three changelog surfaces, update the release command, create the missing `/changelog:backfill` command, and add an RSS feed. The blog uses Fumadocs `defineCollections` with zero new dependencies.

## Background / Problem Statement

DorkOS communicates changes through three surfaces: `CHANGELOG.md`, `docs/changelog.mdx`, and GitHub Releases. Several problems exist:

1. **Content drift**: GitHub Release v0.2.0 includes a bug fix ("CLI build failure for config-manager import resolution") not present in CHANGELOG.md or docs/changelog.mdx. Phase 5.9 of the release command regenerates "All Changes" instead of copying from CHANGELOG.md.
2. **No blog**: The website changelog is plain bullets with no narrative, highlights, or storytelling. There is no per-release announcement page.
3. **Missing backfill command**: The release command references `/changelog:backfill` but it does not exist.
4. **No RSS feed**: Users cannot subscribe to updates.

## Goals

- Add a blog at `/blog` in the marketing route group using Fumadocs `defineCollections`
- Create a retroactive blog post for v0.2.0
- Fix content drift by copying "All Changes" from CHANGELOG.md in the release command
- Add blog post scaffolding to the release flow
- Create the `/changelog:backfill` command
- Add an RSS 2.0 feed at `/blog/feed.xml`
- Add "blog" to the marketing navigation

## Non-Goals

- Blog comments or discussion threads
- Blog search integration (Fumadocs search covers docs only)
- Pagination (premature at < 20 posts)
- Per-major-version changelog splitting
- Automated changelog entries via git hooks
- CMS or admin UI for blog posts
- Email newsletter integration

## Technical Dependencies

All functionality exists in already-installed packages:

| Package | Version | Purpose |
|---|---|---|
| `fumadocs-mdx` | v14.2.7 | `defineCollections`, `toFumadocsSource()` |
| `fumadocs-core` | v16.6.2 | `loader()` for blog source |
| `fumadocs-ui` | v16.6.2 | `InlineTOC`, MDX components |

Zero new npm packages required.

## Detailed Design

### 1. Blog Collection (`source.config.ts`)

Add a `blogPosts` collection alongside the existing `docs`:

```typescript
import { defineConfig, defineDocs, defineCollections } from 'fumadocs-mdx/config'
import { z } from 'zod'

export const docs = defineDocs({
  dir: '../../docs',
})

export const blogPosts = defineCollections({
  type: 'doc',
  dir: '../../blog',
  schema: (ctx) =>
    z.object({
      title: z.string(),
      description: z.string().optional(),
      date: z.coerce.date(),
      author: z.string().optional(),
      category: z.enum(['release', 'tutorial', 'announcement', 'news']).optional(),
      tags: z.array(z.string()).optional(),
      image: z.string().optional(),
    }),
})

export default defineConfig()
```

Key detail: `defineDocs` has `.toFumadocsSource()` built in. `defineCollections` requires the standalone `toFumadocsSource()` helper from `fumadocs-mdx/runtime/server`.

### 2. Blog Loader (`lib/source.ts`)

Add a `blog` loader alongside the existing `source`:

```typescript
import { docs, blogPosts } from '@/.source'
import { loader } from 'fumadocs-core/source'
import { openapiPlugin } from 'fumadocs-openapi/server'
import { toFumadocsSource } from 'fumadocs-mdx/runtime/server'

export const source = loader({
  baseUrl: '/docs',
  source: docs.toFumadocsSource(),
  plugins: [openapiPlugin()],
})

export const blog = loader({
  baseUrl: '/blog',
  source: toFumadocsSource(blogPosts, []),
})
```

The `@/.source` virtual module is auto-generated by fumadocs-mdx at build time from `source.config.ts` exports.

### 3. Blog Content Directory

Create `blog/` at the monorepo root (sibling to `docs/`). MDX files use this frontmatter schema:

```mdx
---
title: DorkOS 0.2.0
description: Marketing site, tunnels, and FSD migration.
date: 2026-02-17
author: DorkOS Team
category: release
tags: [release, fsd, docs, tunnel]
---

Content here...
```

### 4. Blog Routes

Both routes live in the `(marketing)` route group to use the marketing header/footer (not the Fumadocs DocsLayout sidebar).

**Blog index** (`apps/web/src/app/(marketing)/blog/page.tsx`):
- Lists all posts sorted by date descending via `blog.getPages()`
- Shows title, date, category badge, and description
- Generates metadata with title "Blog" and site description

**Blog post page** (`apps/web/src/app/(marketing)/blog/[slug]/page.tsx`):
- Renders individual MDX post via `blog.getPage([slug])`
- Includes `InlineTOC` for longer posts
- Generates OpenGraph metadata with `type: 'article'`
- Uses `generateStaticParams()` for static site generation
- Returns `notFound()` for invalid slugs

**URL pattern**: `/blog/dorkos-0-2-0` (version in slug, SEO-friendly)

### 5. Fumadocs UI Styles for Blog

The `(docs)/layout.tsx` already imports `fumadocs-ui/style.css` (line 9). For blog pages to render `InlineTOC` and MDX components correctly, either:
- Import `fumadocs-ui/style.css` in a blog-specific layout, OR
- Move the import to the root layout

The blog layout should wrap content in a `RootProvider` from `fumadocs-ui/provider/next` so theme and MDX components work outside DocsLayout.

### 6. Marketing Navigation Update

Add "blog" to the `navLinks` array in `apps/web/src/app/(marketing)/page.tsx`:

```typescript
const navLinks = [
  { label: 'system', href: '#system' },
  { label: 'features', href: '#features' },
  { label: 'about', href: '#about' },
  { label: 'contact', href: '#contact' },
  { label: 'blog', href: '/blog' },
  { label: 'docs', href: '/docs' },
]
```

### 7. RSS Feed

Create `apps/web/src/app/blog/feed.xml/route.ts` (outside the `(marketing)` route group for a clean `/blog/feed.xml` URL):

- Route handler generates RSS 2.0 XML
- Uses `blog.getPages()` sorted by date descending
- Includes `<title>`, `<link>`, `<pubDate>`, `<description>` per item
- Channel title: "DorkOS Blog"
- Channel link: `https://dorkos.ai/blog`
- Static generation at build time via `export const dynamic = 'force-static'`

### 8. CHANGELOG.md Format Enhancement

Add an optional theme blockquote below version headings:

```markdown
## [0.3.0] - 2026-02-20

> DorkOS 0.3.0 adds a scheduler and dynamic MCP tools.

### Added
- ...
```

This single line feeds both blog posts and GitHub release highlights. It is optional and backward-compatible — older versions without it work fine.

### 9. Release Command Fixes

#### Fix content drift in Phase 5.9

Update `.claude/commands/system/release.md` so the "All Changes" section in GitHub release notes is **copied directly from CHANGELOG.md**, not regenerated. Only the theme paragraph and Highlights section are generated fresh by Claude.

Updated release notes template for Phase 5.9:

```markdown
## What's New in vX.Y.Z

{Theme from CHANGELOG.md blockquote, or generated 1-2 sentence theme}

### Highlights

{Generated: 2-3 emoji-decorated feature spotlights}

### All Changes

{COPIED DIRECTLY from CHANGELOG.md version section — do not regenerate}

### Install / Update

\`\`\`
npm install -g dorkos@X.Y.Z
\`\`\`

**Full Changelog**: https://github.com/dork-labs/dorkos/compare/v[prev]...v[new]
```

#### Add blog post scaffolding step (Phase 5.5b)

After syncing changelog to docs (Phase 5.5), scaffold a blog post:

1. Create `blog/dorkos-X-Y-Z.mdx` with frontmatter (title, description from theme, date, `category: release`)
2. Include the highlights and all changes as initial content
3. User can edit the post before the release commit

### 10. Changelog Backfill Command

Create `.claude/commands/changelog/backfill.md`:

- Parses `git log` since last tag (or specified tag via `$ARGUMENTS`)
- Filters conventional commits (`feat:`, `fix:`, `refactor:`, `perf:`)
- Skips `chore:`, `ci:`, `test:`, `docs:` commits
- Presents proposed entries organized by Added / Changed / Fixed
- User approves all, reviews individually, or skips
- Applies approved entries to CHANGELOG.md `[Unreleased]` section
- Shell-based (no Python dependency) — uses inline Bash commands
- Supports `--dry-run` flag in arguments

### 11. Retroactive Content

Create `blog/dorkos-0-2-0.mdx` for v0.2.0 based on existing CHANGELOG.md content and the GitHub Release v0.2.0 narrative. Do NOT create a v0.1.0 post.

## Data Flow

```
blog/*.mdx → source.config.ts (defineCollections) → @/.source virtual module
  → lib/source.ts (blog loader) → (marketing)/blog/ route pages

CHANGELOG.md → /system:release → docs/changelog.mdx (sync, Phase 5.5)
                                → blog/dorkos-X-Y-Z.mdx (scaffold, Phase 5.5b)
                                → gh release create (narrative, Phase 5.9)
```

## User Experience

### Blog Readers
- Navigate to `/blog` from marketing nav or direct URL
- Browse posts sorted by most recent
- Each post shows title, date, category badge, and description
- Click through to full post with table of contents
- Subscribe via RSS at `/blog/feed.xml`

### Release Authors (via `/system:release`)
- CHANGELOG.md gets optional theme blockquote during preparation
- Phase 5.5 syncs to docs (existing)
- Phase 5.5b scaffolds blog post from changelog content
- Author can edit the blog post before the release commit
- Phase 5.9 copies "All Changes" directly from CHANGELOG.md (no drift)

### Changelog Backfill (via `/changelog:backfill`)
- Run command between releases to catch missed entries
- Command presents proposed entries grouped by category
- Author reviews and approves entries
- Entries are appended to `[Unreleased]` section

## Testing Strategy

The web app has no test suite. Validation is manual and build-based:

- `npm run build -w apps/web` succeeds without errors
- Blog index renders at `/blog` with post listing
- Individual post renders at `/blog/dorkos-0-2-0`
- RSS feed returns valid XML at `/blog/feed.xml`
- TypeScript compiles with no errors (`npx tsc --noEmit` in `apps/web`)
- Navigation shows "blog" link on marketing page

## Performance Considerations

- All blog pages are statically generated at build time (`generateStaticParams`)
- RSS feed is static (`force-static`)
- Blog collection adds minimal build overhead (MDX compilation)
- No client-side JavaScript beyond existing Fumadocs hydration

## Security Considerations

- Blog content is MDX files committed to the repository — no user-generated content
- RSS feed contains no sensitive data
- Blog routes follow the same CSP headers as the marketing site

## Files Modified

| File | Change |
|---|---|
| `apps/web/source.config.ts` | Add `blogPosts` collection via `defineCollections` |
| `apps/web/src/lib/source.ts` | Add `blog` loader with `toFumadocsSource` |
| `apps/web/src/app/(marketing)/page.tsx` | Add "blog" to `navLinks` array |
| `.claude/commands/system/release.md` | Fix Phase 5.9 content drift, add Phase 5.5b blog scaffolding |
| `.claude/skills/writing-changelogs/SKILL.md` | Add theme blockquote convention |

## Files Created

| File | Purpose |
|---|---|
| `blog/dorkos-0-2-0.mdx` | Retroactive v0.2.0 release post |
| `apps/web/src/app/(marketing)/blog/page.tsx` | Blog index page |
| `apps/web/src/app/(marketing)/blog/[slug]/page.tsx` | Blog post page |
| `apps/web/src/app/blog/feed.xml/route.ts` | RSS 2.0 feed |
| `.claude/commands/changelog/backfill.md` | Changelog backfill command |

## Implementation Phases

### Phase 1: Blog Infrastructure

1. Update `source.config.ts` with `blogPosts` collection
2. Update `lib/source.ts` with `blog` loader
3. Create `blog/` directory with `dorkos-0-2-0.mdx`
4. Create blog index page
5. Create blog post page with MDX rendering
6. Add Fumadocs UI styles for blog layout
7. Add "blog" to marketing navigation
8. Verify build succeeds

### Phase 2: RSS Feed & Release Fixes

9. Create RSS feed route handler
10. Fix Phase 5.9 content drift in release command
11. Add Phase 5.5b blog post scaffolding to release command
12. Add theme blockquote convention to changelog skill

### Phase 3: Backfill Command

13. Create `.claude/commands/changelog/backfill.md`
14. Test backfill against current git history

## Acceptance Criteria

1. Blog index at `/blog` lists posts sorted by date
2. Individual blog posts render with MDX components and InlineTOC
3. RSS feed at `/blog/feed.xml` returns valid RSS 2.0 XML
4. "Blog" link appears in marketing navigation
5. v0.2.0 release post exists at `/blog/dorkos-0-2-0`
6. Release command copies "All Changes" from CHANGELOG.md (no regeneration)
7. Release command scaffolds blog post during release flow
8. `/changelog:backfill` command finds and proposes missing entries
9. TypeScript compiles with no errors
10. Web app builds successfully

## Open Questions

None — all clarification questions from ideation were resolved:

- Blog URLs: `/blog/dorkos-0-2-0` (version in slug)
- Nav: Add to main marketing nav
- Retroactive posts: v0.2.0 only
- Changelog format: Optional theme blockquote
- Backfill scope: Find missing entries only (no quality audit)

## Related ADRs

No existing ADRs are directly related to this feature.

## References

- [Fumadocs `defineCollections` API](https://fumadocs.dev/docs/mdx/collections)
- [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)
- Spec #33: Versioning, Release & Update System
- Spec #37: World-Class Documentation
- Research: `research/fumadocs-blog-research.md`
- Ideation: `specs/world-class-release-notes/01-ideation.md`
